<div class="ressources-container">
    <div class="ressources-query-container">
        <div class="ressources-query-parent" [ngStyle]="{'margin-right':'15px'}">
            <label for="ressources-query-input">Search for libraries: </label>
            <input (ngModelChange)="onRessourcesQueryStringChange($event)" type="text" id="ressources-query-input" class="form-control ressources-query-input" [(ngModel)]="ressourcesQueryString">
        </div>
        <div class="ressources-query-version-parent" *ngIf="currentRessourceChoice.name" style="margin-right:15px">
            <label for="ressources-query-input">Choose version: </label>
            <select [(ngModel)]="currentRessourceVersion" (ngModelChange)="onCurrentRessourceChoiceVersionChange($event)" class="form-control">
                <option *ngFor="let version of currentRessourceVersions" [value]="version">{{version}}</option>
            </select>
        </div>
        <app-loader #loader></app-loader>
    </div>
    <div class="ressources-choices-container" [ngClass]="{'is-reduced': (selectedRessourceAssets.length > 0)}">
        <div class="ressources-choices-parent" *ngIf="availableRessources.length">
            <div class="ressources-choice" *ngFor="let ressource of availableRessources" (click)="onRessourcesChoiceClick(ressource)" [ngClass]="{'current-choice':currentRessourceChoice.name == ressource.name}">
                <div class="ressource-choice-name">{{ressource.name}}</div>
                <div class="ressource-choice-version">
                    <span class="ressource-version-btn">Version:</span>
                    <span class="ressource-version-number">{{ressource.version}}</span>
                </div>
                <div class="ressource-choice-description">{{ressource.description}}</div>
            </div>
        </div>  
    </div>    
    <hr>
    <div class="ressources-choice-files-search" *ngIf="currentRessourceAssetsByVersion.length">
        <h3 style="text-align: center;margin:1px 0px;">{{currentRessourceChoice.name}} {{currentRessourceVersion}} ressources (click to toggle)</h3>
        <div>
            <label for="ressources-choice-files-search-input">Search for files: </label>
            <input (ngModelChange)="onRessourcesChoiceFilesSearchStringChange($event)" type="text" id="ressources-choice-files-search-input" class="form-control ressources-choice-files-search" [(ngModel)]="ressourcesChoiceFilesSearchString">
        </div>
    </div>
    <div class="ressources-choice-files-container" *ngIf="currentRessourceVersion && currentRessourceAssetsByVersion.length" [ngClass]="{'is-stretched': (selectedRessourceAssets.length == 0)}">
        <div class="ressources-choice-files-parent">
            <div [ngClass]="{'selected': isRessourceAssetSelected(file, currentRessourceChoice)}" class="ressources-choice-files" *ngFor="let file of getFilteredcurrentRessourceAssetsByVersion(currentRessourceAssetsByVersion, ressourcesChoiceFilesSearchString)" (click)="onSelectRessourceAsset(file, currentRessourceChoice)" [title]="'(click to toggle)'">
                <span class="ressource-choice-file">{{file}}</span>
            </div>
        </div> 
    </div>
    <hr *ngIf="selectedRessourceAssets.length">
    <h3 style="text-align: center;margin:1px 0px;" *ngIf="selectedRessourceAssets.length">Seleted ressources (grab to reorder)</h3>
    <div class="ressources-choice-selected-files-container" *ngIf="selectedRessourceAssets.length" [ngClass]="{'is-stretched': (selectedRessourceAssets.length > 0)}">
            <div draggable="true" class="ressources-choice-selected-file" *ngFor="let selectedFile of selectedRessourceAssets; let ind = index" [title]="'Grab to reorder'" (drop)="ressourceChoiceSelectedAssetDrop($event)" (dragover)="ressourceChoiceSelectedAssetDragover($event)" (dragstart)="ressourceChoiceSelectedAssetDragstart($event)" (dragenter)="ressourceChoiceSelectedAssetDragenter($event)" (dragleave)="ressourceChoiceSelectedAssetDragleave($event)" [attr.data-index]="ind" [ngClass]="{'placeholder':selectedFile.placeholderMode}">
                <span>{{getFullAssetUrl(selectedFile)}}</span>
                <button class="btn" (click)="removeSelectedRessourceAsset(selectedFile)"><span>X</span></button>
            </div> 
        </div>
</div>