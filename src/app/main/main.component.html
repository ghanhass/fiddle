<header id="main-header">
    <div class="header-btns-container">
        <button class="ressources-code-btn" (click)="ressouresBtnClick()">
            <span>Ressources</span>
        </button>
        <button class="layouts-list-container" (click)="toggleLayoutsList()" [ngClass]="{'shown': isLayoutsListShown, 'hidden': !isLayoutsListShown}">
            <span>Layouts <i class="fa fa-sort-desc" aria-hidden="true"></i><i class="fa fa-sort-asc" aria-hidden="true"></i>
            </span>
            <div class="layouts-list" #layoutsList>
                <div class="layout-1 layout" #layout1 (click)="changeLayout(1)" [ngClass]="{'active':(layout === 1)}">
                    <div>
                        <div>
                        </div>
                        <div>
                        </div>
                        <div>
                        </div>
                    </div>
                    <div>
                    </div>
                </div>
                <!---->
                <div class="layout-2 layout" #layout2  [ngClass]="{'active':(layout === 2)}" style="cursor:not-allowed;opacity: 0.5;">
                    <div>
                        <div>
                        </div>
                        <div>
                        </div>
                        <div>
                        </div>
                    </div>
                    <div>
                    </div>
                </div>
                <!---->
                <div class="layout-3 layout" #layout3 (click)="changeLayout(3)" [ngClass]="{'active':(layout === 3)}">
                    <div>
                        <div>
                        </div>
                        <div>
                        </div>
                        <div>
                        </div>
                    </div>
                    <div>
                    </div>
                </div>
                <!---->
                <div class="layout-4 layout" #layout4  [ngClass]="{'active':(layout === 4)}" style="cursor:not-allowed;opacity: 0.5;">
                    <div>
                        <div>
                        </div>
                        <div>
                        </div>
                        <div>
                        </div>
                    </div>
                    <div>
                    </div>
                </div>
            </div>
        </button>
        <button class="share-code-btn" (click)="runCode('save')">
            <span>Run and share</span>
        </button>
        <button class="share-code-btn" (click)="runCode()">
            <span>Run</span>
        </button>
    </div>
</header>
<div class="main-container" [ngClass]="'layout-type-'+layout" #mainContainer (mousemove)="mainContainerMousemove($event)">
    <div id="code-parts-title-mobile">
        <a #htmlMobileToggle (click)="toggleCodePart('html')" [ngClass]="{'active':showHtml}">HTML</a>
        <a #cssMobileToggle (click)="toggleCodePart('css')" [ngClass]="{'active':showCss}">CSS</a>
        <a #jsMobileToggle (click)="toggleCodePart('js')" [ngClass]="{'active':showJs}">JS</a>
        <a #resultMobileToggle (click)="toggleCodePart('result')" [ngClass]="{'active':showResult}">Result</a>
    </div>
    <div id="code-parts" #codeParts [ngClass]="{'hide-mobile': !showHtml && !showCss && !showJs}" 
    [ngStyle]="{'width':getCodePartsWidth(), 'min-width': getCodePartsWidth(), 'height': getCodePartsHeight(),'max-height': !showResult ? '100%':''}" (mousemove)="codePartsMousemove($event)">
        <div class="code-component-container code-component-container-html" 
        [ngClass]="{'hide-mobile': !showHtml, 'fullscreen': isHtmlFullScreen}" [ngStyle]="{'z-index':1}" #htmlPart>
            <div class="code-part-title">
                <span>HTML</span>
                <div class="code-part-title-btns-container">
                    <a class="html-expand-btn code-part-title-btn" [title]="'Expand HTML Vertically'" (click)='expandHtml()'>
                        <i class="fa fa-arrows-v" aria-hidden="true"></i>
                    </a>
                
                    <a class="html-fullscreen-btn code-part-title-btn" (click)="toggleFullScreenMode('html')" [ngClass]="{'on':isHtmlFullScreen}" [title]="'Full screen HTML'">
                        <i class="fa fa-arrows-alt" aria-hidden="true"></i>
                    </a>
                </div>
            </div>
            <app-html-part #htmlPartComponent class="code-component" [code]="htmlCode"></app-html-part>
        </div>
        <div class="code-component-container code-component-container-css"
         [ngClass]="{'hide-mobile': !showCss, 'fullscreen': isCssFullScreen}" [ngStyle]="{'z-index':2}" #cssPart>
            <div class="code-part-title" (mousedown)="codePartsTitleMousedown($event,'css')">
                <span>CSS</span>
                <div class="code-part-title-btns-container">
                    <a class="css-expand-btn code-part-title-btn" [title]="'Expand CSS vertically'" (click)="expandCss()">
                        <i class="fa fa-arrows-v" aria-hidden="true"></i>
                    </a>
                    <a class="css-fullscreen-btn code-part-title-btn" (click)="toggleFullScreenMode('css')" [ngClass]="{'on':isCssFullScreen}" [title]="'Full screen CSS'">
                        <i class="fa fa-arrows-alt" aria-hidden="true"></i>
                    </a>
                </div>
            </div>
            <app-css-part #cssPartComponent class="code-component" [code]="cssCode"></app-css-part>
        </div>
        <div class="code-component-container code-component-container-js" 
        [ngClass]="{'hide-mobile': !showJs, 'fullscreen': isJsFullScreen}" [ngStyle]="{'z-index':3}" #jsPart>
            <div class="code-part-title" (mousedown)="codePartsTitleMousedown($event,'js')">
                <span>JAVASCRIPT</span>
                <div class="code-part-title-btns-container">
                    <a class="js-expand-btn code-part-title-btn" [title]="'Expand JS vertically'" (click)="expandJs()">
                        <i class="fa fa-arrows-v" aria-hidden="true"></i>
                    </a>
                    <a class="js-fullscreen-btn code-part-title-btn" (click)="toggleFullScreenMode('js')" [ngClass]="{'on':isJsFullScreen}" [title]="'Full screen JS'">
                        <i class="fa fa-arrows-alt" aria-hidden="true"></i>
                    </a>
                </div>
            </div>
            <app-js-part #jsPartComponent class="code-component" [code]="jsCode"></app-js-part>
        </div>
    </div>
    <div #mainResizerFloor [ngClass]="{'main-resizer-floor': true, 'hide': !mainResizeMode}"></div>
    <div #mainResizer id="main-resizer" [ngStyle]="{'left':mainResizerLeft, 'right':mainResizerRight}" 
    [ngClass]="{'resize-mode':mainResizeMode, 'layout-type-1': (layout == 1), 'layout-type-2': (layout == 2), 'layout-type-3': (layout == 3), 'layout-type-4': (layout == 4)}" (mousedown)="mainResizerMousedownHandler($event)"></div>
    <app-iframe-part #iframePart [ngClass]="{'hide-mobile': !showResult, 'layout-type-1': (layout == 1), 'layout-type-2': (layout == 2), 'layout-type-3': (layout == 3), 'layout-type-4': (layout == 4)}" 
    [ngStyle]="{'height': (!showHtml && !showCss && !showJs) ? '100%':'','max-height': (!showHtml && !showCss && !showJs) ? '100%':''}" 
    #iframePart></app-iframe-part>
</div>
<app-modal #modal>
    <div class="modal-header">
        <h2>Fiddle ressources</h2>
        <button class="modal-close-btn" (click)="hideModal()"><span>X</span></button>
    </div>
    <div class="modal-body">
        <app-ressources></app-ressources>
    </div>
    <div class="modal-footer">
        <button class="btn"><span>Save and close</span></button>
    </div>
</app-modal>